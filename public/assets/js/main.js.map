{"version":3,"sources":["1_main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//QUERY SELECTORS\nconst charactersList = document.querySelector('.js-characters-list');\nconst favList = document.querySelector('.js-fav-list');\nconst searchBtn = document.querySelector('.js-search-btn');\nconst input = document.querySelector('.js-input');\nconst charactersSection = document.querySelector('.js-characters-section');\nconst favSection = document.querySelector('.js-fav-section');\n\n//VARIABLES GLOBALES\nlet allCharacters = [];\nlet favCharacters = [];\n\n//Pintar todos los personajes al cargar la página\n\n\n//¿Puedo dejar este fetch fuera de todo?\nfetch ('https://breakingbadapi.com/api/characters')\n.then ((response)=>response.json())\n.then ((jsondata)=>{\n    allCharacters = jsondata;\n    getFavoritesFromStorage();\n    renderFavCharacters();\n    renderAllCharacters();\n    hideShowFavSection();\n})\n\nfunction renderOneCharacter (character){\n    \n    //Creo el li con todo lo que lleva dentro con DOM avanzado\n    const characterElement = document.createElement('li');\n    characterElement.classList.add ('character');\n    characterElement.classList.add ('js-character');\n    characterElement.setAttribute('id',character.char_id);\n\n    const characterImg = document.createElement('img');\n    characterImg.classList.add ('character__img');\n    characterImg.src = character.img;\n    characterImg.setAttribute('alt',`image of ${character.name}`);\n    characterElement.appendChild(characterImg);\n    \n\n    const characterName = document.createElement('h3');\n    characterName.classList.add ('character__name');\n    const textName = document.createTextNode(character.name);\n    characterName.appendChild(textName);\n    characterElement.appendChild(characterName);\n\n    const characterStatus = document.createElement('p');\n    characterStatus.classList.add ('character__status');\n    const textStatus = document.createTextNode(character.status);\n    characterStatus.appendChild(textStatus);\n    characterElement.appendChild(characterStatus);\n\n    return characterElement;\n}\n\n\nfunction listenerForCharacters(){\n    const allCharactersLi = document.querySelectorAll('.js-character');\n    for (const eachCharacter of allCharactersLi){\n        eachCharacter.addEventListener('click',handleClickCharacter)\n    }\n}\n\n\nfunction renderAllCharacters(){\n    charactersList.innerHTML = '';\n    for (let i = 0; i < allCharacters.length; i++) {\n        const liCharacter= renderOneCharacter(allCharacters[i]);  \n        charactersList.appendChild(liCharacter);\n\n        const positionInFav = favCharacters.findIndex((favCharacter)=> favCharacter.char_id === parseInt(liCharacter.getAttribute('id')));\n        if (positionInFav !== -1){\n            liCharacter.classList.add('selected');\n        }\n     }\n    listenerForCharacters();\n}\n\n//Funcionalidad del botón de Search\n\nfunction handleSearchBtn (event){\nevent.preventDefault();\nconst searchedNameList = allCharacters.filter((character)=>character.name.toLowerCase().includes(input.value.toLowerCase()));\ncharactersList.innerHTML = '';\nfor (let i = 0; i < searchedNameList.length; i++) {\n    const cha = renderOneCharacter(searchedNameList[i]); \n    charactersList.appendChild(cha);   \n}\nlistenerForCharacters();\n}\n\nsearchBtn.addEventListener('click', handleSearchBtn);\n\n\n//Marcar los personajes favoritos y pintarlos en la columna de favoritos sin repetirlos o sacarlos de favoritos.\n\nfunction renderFavCharacters() {\n    favList.innerHTML = '';\n    for (let i = 0; i < favCharacters.length; i++) {\n        const cha= renderOneCharacter(favCharacters[i]); \n        favList.appendChild(cha); \n}\n    }\nfunction hideShowFavSection() {\n    if (favList.innerHTML === ''){\n        favSection.classList.add('hidden');\n        charactersSection.classList.add('when-hidden');\n    }else{\n        favSection.classList.remove('hidden');\n        charactersSection.classList.remove('when-hidden');\n    }\n}\nfunction addCharacterToFav(){\n    if (event.currentTarget.classList.contains('selected')){\n        const selectedCharacter = allCharacters.find((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.getAttribute('id')));\n        const characterInFav = favCharacters.find((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.getAttribute('id'))) ;\n        if (!characterInFav){\n            favCharacters.push(selectedCharacter);\n        }\n    }else{\n        const selectedCharacterPosition = favCharacters.findIndex((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.getAttribute('id')));\n        favCharacters.splice(selectedCharacterPosition,1);\n    }\n}\n\nfunction saveFavoritesToLocalStorage(){\n    console.log(favCharacters);\n    localStorage.setItem(\"Favorites\", JSON.stringify(favCharacters));\n}\nfunction getFavoritesFromStorage(){\n    const savedFavorites = JSON.parse(localStorage.getItem(\"Favorites\"));\n    favCharacters = savedFavorites;\n}\n\n\nfunction handleClickCharacter(event){\nevent.currentTarget.classList.toggle('selected');\naddCharacterToFav();\nrenderFavCharacters();\nhideShowFavSection();\nsaveFavoritesToLocalStorage();\n}\n\n// Almacenamiento local de favoritos\n\n\n\n\n\n//   if (event.currentTarget.classList.contains('selected')){\n        \n    \n    \n    \n    \n//     const charactersToMark = allCharacters.find((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.getAttribute('id')));\n//         const characterInFav = favCharacters.find((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.getAttribute('id'))) ;\n//         if (!characterInFav){\n//             favCharacters.push(selectedCharacter);\n//         }\n\n\n\n\n// for (const eachCharacter of allCharacters) {\n\n// const positionInFav = favCharacters.findIndex((favCharacter)=> favCharacter.id === eachCharacter.id);\n// if (positionInFav=== -1)\n// .classList.add('selected');\n// }\n\n"]}
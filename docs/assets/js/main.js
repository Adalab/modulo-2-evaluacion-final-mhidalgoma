"use strict";const charactersList=document.querySelector(".js-characters-list"),favList=document.querySelector(".js-fav-list"),searchBtn=document.querySelector(".js-search-btn"),input=document.querySelector(".js-input"),charactersSection=document.querySelector(".js-characters-section"),favSection=document.querySelector(".js-fav-section");let allCharacters=[],favCharacters=[];function renderOneCharacter(e){const t=document.createElement("li");t.classList.add("character"),t.classList.add("js-character"),t.setAttribute("id",e.char_id);const a=document.createElement("img");a.classList.add("character__img"),a.src=e.img,a.setAttribute("alt","image of "+e.name),t.appendChild(a);const r=document.createElement("h3");r.classList.add("character__name");const c=document.createTextNode(e.name);r.appendChild(c),t.appendChild(r);const n=document.createElement("p");n.classList.add("character__status");const s=document.createTextNode(e.status);return n.appendChild(s),t.appendChild(n),t}function listenerForCharacters(){const e=document.querySelectorAll(".js-character");for(const t of e)t.addEventListener("click",handleClickCharacter)}function renderAllCharacters(){charactersList.innerHTML="";for(let e=0;e<allCharacters.length;e++){const t=renderOneCharacter(allCharacters[e]);charactersList.appendChild(t);-1!==favCharacters.findIndex(e=>e.char_id===parseInt(t.getAttribute("id")))&&t.classList.add("selected")}listenerForCharacters()}function handleSearchBtn(e){e.preventDefault();const t=allCharacters.filter(e=>e.name.toLowerCase().includes(input.value.toLowerCase()));charactersList.innerHTML="";for(let e=0;e<t.length;e++){const a=renderOneCharacter(t[e]);charactersList.appendChild(a)}listenerForCharacters()}function renderFavCharacters(){favList.innerHTML="";for(let e=0;e<favCharacters.length;e++){const t=renderOneCharacter(favCharacters[e]);favList.appendChild(t)}}function hideShowFavSection(){""===favList.innerHTML?(favSection.classList.add("hidden"),charactersSection.classList.add("when-hidden")):(favSection.classList.remove("hidden"),charactersSection.classList.remove("when-hidden"))}function addCharacterToFav(){if(event.currentTarget.classList.contains("selected")){const e=allCharacters.find(e=>parseInt(e.char_id)===parseInt(event.currentTarget.getAttribute("id")));favCharacters.find(e=>parseInt(e.char_id)===parseInt(event.currentTarget.getAttribute("id")))||favCharacters.push(e)}else{const e=favCharacters.findIndex(e=>parseInt(e.char_id)===parseInt(event.currentTarget.getAttribute("id")));favCharacters.splice(e,1)}}function saveFavoritesToLocalStorage(){console.log(favCharacters),localStorage.setItem("Favorites",JSON.stringify(favCharacters))}function getFavoritesFromStorage(){const e=JSON.parse(localStorage.getItem("Favorites"));favCharacters=e}function handleClickCharacter(e){e.currentTarget.classList.toggle("selected"),addCharacterToFav(),renderFavCharacters(),hideShowFavSection(),saveFavoritesToLocalStorage()}fetch("https://breakingbadapi.com/api/characters").then(e=>e.json()).then(e=>{allCharacters=e,getFavoritesFromStorage(),renderFavCharacters(),renderAllCharacters(),hideShowFavSection()}),searchBtn.addEventListener("click",handleSearchBtn);
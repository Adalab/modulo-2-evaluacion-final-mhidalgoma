{"version":3,"sources":["1_main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//QUERY SELECTORS\nconst charactersList = document.querySelector('.js-characters-list');\nconst favList = document.querySelector('.js-fav-list');\nconst searchBtn = document.querySelector('.js-search-btn');\nconst input = document.querySelector('.js-input');\nconst charactersSection = document.querySelector('.js-characters-section');\nconst favSection = document.querySelector('.js-fav-section');\nconst resetBtn = document.querySelector('.js-reset-btn');\n\n//VARIABLES GLOBALES\nlet allCharacters = [];\nlet favCharacters = [];\nlet currentSearchCharacters = [];\n\n// FUNCIONES\nfunction renderOneCharacter (character){\n    \n    //Creo el li con todo lo que lleva dentro con DOM avanzado\n    const characterElement = document.createElement('li');\n    characterElement.classList.add ('character');\n    characterElement.classList.add ('js-character');\n    characterElement.setAttribute('id',character.char_id);\n\n    // const divHeart = document.createElement('div');\n    // const characterHeart = document.createElement('i');\n    // characterHeart.classList.add ('fa-solid');\n    // characterHeart.classList.add ('fa-heart');\n    // characterHeart.classList.add ('fa-xl');\n    // divHeart.appendChild(characterHeart);       \n    // divHeart.classList.add('character__heart');\n    // divHeart.classList.add('hidden');\n    // characterElement.appendChild(divHeart);\n\n\n    const characterImg = document.createElement('img');\n    characterImg.classList.add ('character__img');\n    characterImg.src = character.img;\n    characterImg.setAttribute('alt',`image of ${character.name}`);\n    characterElement.appendChild(characterImg);\n    \n\n    const characterName = document.createElement('h3');\n    characterName.classList.add ('character__name');\n    const textName = document.createTextNode(character.name);\n    characterName.appendChild(textName);\n    characterElement.appendChild(characterName);\n\n    const characterStatus = document.createElement('p');\n    characterStatus.classList.add ('character__status');\n    const textStatus = document.createTextNode(character.status);\n    characterStatus.appendChild(textStatus);\n    characterElement.appendChild(characterStatus);\n\n    return characterElement;\n}\nfunction renderOneFavCharacter(character){\n    \n    //Creo el li con todo lo que lleva dentro con DOM avanzado\n    const characterElement = document.createElement('li');\n    characterElement.classList.add ('character');\n    characterElement.classList.add ('js-fav-character');\n    characterElement.setAttribute('id',character.char_id);\n\n    const divHeartCross = document.createElement('div');\n    const iconHeartCross = document.createElement('i');\n    iconHeartCross.classList.add ('fa-solid');\n    iconHeartCross.classList.add ('fa-heart-circle-xmark');\n    iconHeartCross.classList.add ('fa-xl');\n    divHeartCross.appendChild(iconHeartCross);       \n    divHeartCross.classList.add('character__heart--cross');\n    //divHeartCross.classList.add('hidden');\n    characterElement.appendChild(divHeartCross);\n\n    const characterImg = document.createElement('img');\n    characterImg.classList.add ('character__img');\n    characterImg.src = character.img;\n    characterImg.setAttribute('alt',`image of ${character.name}`);\n    characterElement.appendChild(characterImg);\n\n    const characterName = document.createElement('h3');\n    characterName.classList.add ('character__name');\n    const textName = document.createTextNode(character.name);\n    characterName.appendChild(textName);\n    characterElement.appendChild(characterName);\n\n    const characterStatus = document.createElement('p');\n    characterStatus.classList.add ('character__status');\n    const textStatus = document.createTextNode(character.status);\n    characterStatus.appendChild(textStatus);\n    characterElement.appendChild(characterStatus);\n\n    return characterElement; \n}\nfunction renderAllCharacters(){\n    charactersList.innerHTML = '';\n\n    const characters = currentSearchCharacters.length === 0 ? allCharacters : currentSearchCharacters;\n\n    for (let i = 0; i < characters.length; i++) {\n        const liCharacter= renderOneCharacter(characters[i]);  \n        charactersList.appendChild(liCharacter);\n        const positionInFav = favCharacters.findIndex((favCharacter)=> favCharacter.char_id === parseInt(liCharacter.getAttribute('id')));\n        if (positionInFav !== -1){\n            liCharacter.classList.add('selected');\n        }\n     }\n    listenerForCharacters();\n}\nfunction renderFavCharacters(){\n    favList.innerHTML = '';\n    console.log('hola',favCharacters);\n    for (let i = 0; i < favCharacters.length; i++) {\n        const favCharacterToRender= renderOneFavCharacter(favCharacters[i]); \n        favList.appendChild(favCharacterToRender); \n    }\n    listenerForCharactersWithHeartCross();\n}\nfunction listenerForCharacters(){\n    const allCharactersLi = document.querySelectorAll('.js-character');\n    for (const eachCharacter of allCharactersLi){\n        eachCharacter.addEventListener('click',handleClickCharacter)\n    }\n}\nfunction listenerForCharactersWithHeartCross(){\n    const allHeartsCross = document.querySelectorAll('.fa-heart-circle-xmark');\n    for (const eachHeart of allHeartsCross){\n        eachHeart.addEventListener('click',handleClickHeart);\n    }\n}\nfunction hideShowFavSection() {\n    if (favList.innerHTML === ''){\n        favSection.classList.add('hidden');\n        charactersSection.classList.add('when-hidden');\n    }else{\n        favSection.classList.remove('hidden');\n        charactersSection.classList.remove('when-hidden');\n    }\n}\nfunction addCharacterToFav(){\n    if (event.currentTarget.classList.contains('selected')){\n        const selectedCharacter = allCharacters.find((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.getAttribute('id')));\n        const characterInFav = favCharacters.find((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.getAttribute('id'))) ;\n        if (!characterInFav){\n            favCharacters.push(selectedCharacter);\n            //debugger;\n        }\n    }else{\n        const selectedCharacterPosition = favCharacters.findIndex((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.getAttribute('id')));\n        favCharacters.splice(selectedCharacterPosition,1);\n    }\n}\nfunction saveFavoritesToLocalStorage(){\n    localStorage.setItem(\"Favorites\", JSON.stringify(favCharacters));\n}\nfunction getFavoritesFromStorage(){\n    const savedFavorites = JSON.parse(localStorage.getItem(\"Favorites\"));\n    favCharacters = savedFavorites;\n}\nfunction handleClickCharacter(event){\nevent.currentTarget.classList.toggle('selected');\naddCharacterToFav();\nrenderFavCharacters();\nhideShowFavSection();\nsaveFavoritesToLocalStorage();\n}\nfunction handleResetBtn(event){\n    event.preventDefault();\n    favCharacters = [];\n    renderFavCharacters();\n    renderAllCharacters();\n    hideShowFavSection();\n    saveFavoritesToLocalStorage();\n}\nfunction handleSearchBtn (event){\n    event.preventDefault();\n    currentSearchCharacters = allCharacters.filter((character)=>character.name.toLowerCase().includes(input.value.toLowerCase()));\n    renderAllCharacters();\n    listenerForCharacters();\n    }\nfunction handleClickHeart (event){\n    const selectedCharacterPosition = favCharacters.findIndex((eachCharacter)=> parseInt(eachCharacter.char_id) === parseInt(event.currentTarget.closest('.js-fav-character').getAttribute('id')));\n    console.log(selectedCharacterPosition);\n    favCharacters.splice(selectedCharacterPosition,1);\n    console.log(favCharacters);\n    renderFavCharacters();\n    saveFavoritesToLocalStorage();\n    renderAllCharacters();\n    hideShowFavSection();\n}\n\n// EVENTOS \nsearchBtn.addEventListener('click', handleSearchBtn);\nresetBtn.addEventListener('click',handleResetBtn);\n\n// CÓDIGO QUE SE EJECUTA AL CARGAR LA PÁGINA\nfetch ('https://breakingbadapi.com/api/characters')\n.then ((response)=>response.json())\n.then ((jsondata)=>{\n    allCharacters = jsondata;\n    getFavoritesFromStorage();\n    renderFavCharacters();\n    renderAllCharacters();\n    hideShowFavSection();\n})"]}